cmake_minimum_required(VERSION 3.20)

project(External NONE)

include(ExternalProject)

# Prevent warning about 'DOWNLOAD_EXTRACT_TIMESTAMP'.
if(CMAKE_VERSION VERSION_GREATER_EQUAL "3.24.0")
  cmake_policy(SET CMP0135 NEW)
endif()

ExternalProject_Add(
  cppad
  URL https://github.com/coin-or/CppAD/archive/refs/tags/20230000.0.zip
  URL_HASH
    SHA256=a5a6b32e026c01f71dba580552176cd9fc69b72ec3156c9438552d42068ac54a
  CMAKE_CACHE_ARGS -Dcppad_prefix:STRING=${CMAKE_BINARY_DIR}/external/cppad)

ExternalProject_Add(
  cppadcodegen
  URL https://github.com/joaoleal/CppADCodeGen/archive/refs/tags/v2.4.3.zip
  URL_HASH
    SHA256=ed2be58bbd4912bf675c088ca06a508d8470a5ff68b0e6c2963d530177121408
  CMAKE_CACHE_ARGS
    -DCPPAD_HOME:STRING=${CMAKE_BINARY_DIR}/external/cppad/include
    -DCMAKE_INSTALL_PREFIX:STRING=${CMAKE_BINARY_DIR}/external/cppadcodegen
  DEPENDS cppad)
